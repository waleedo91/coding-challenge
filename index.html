<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.2.0/d3.min.js"
      integrity="sha512-uM8yWltkQ6S5r4ItJehZfUM8PUBPYkA8L1AkbRYjvH5ALHIFjF7J/QEyhda4saz4Jth65TyXXGFDyeZw+MoOKQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/chart.js"
    ></script>
  </head>
  <body>
    <div id="box-chart">
      <canvas id="scatter-chart" height="975" width="1920"></canvas>
    </div>

    <script>
      const csvData = "searchLog.csv";

      d3.csv(csvData).then(function (data) {
        console.log(data);

        data.map(query => {
          console.log(query)
        })
        

        // data.map((hits) => {
        //   console.log(hits.query + " has " + hits.hits + " hits");
        // });

        // let countObj = {};
        // let countArr = [];

        // Used to count how many times a query was searched
        // function countFunc(keys) {
        //   countObj[keys] = ++countObj[keys] || 1;
        //   console.log(countObj);
        // }

        // const searched = [];
        // const count = Object.entries(countObj).map((e) => ({ [e[0]]: e[1] }));
        // console.log(count);

        // for (let i = 0; i < count.length; i++) {
        //   // console.log(count[i]);
        //   searched.push(count[i]);
        // }

        // console.log(searched);
        // searched.map((r) => {
        //   console.log(Object.values(r));
        // });

        // const dataQuery = {
        //   datasets: [
        //     {
        //       label: "Search Query for November/December",
        //       data: [
        //         {
        //           x: searched.map((query) => Object.keys(query)),
        //           y: fullData.map((hits) => hits.hits),
        //         },
        //       ],
        //       backgroundColor: "rgb(94,32,14)",
        //     },
        //   ],
        // };

        // const ctx = document.getElementById("scatter-chart");
        // const scatterChart = new Chart(ctx, {
        //   type: "scatter",
        //   data: dataQuery.data,
        //   options: {
        //     scales: {
        //       x: {
        //         type: "linear",
        //         position: "bottom",
        //       },
        //     },
        //     responsive: true,
        //   },

        // });

        const ctx = document.getElementById("scatter-chart").getContext("2d");
        const myChart = new Chart(ctx, {
          type: "scatter",
          data: {
            datasets: [
              {
                // data: queryData,
                // {
                //   x: searched.map((query) => Object.keys(query)),
                //   y: fullData.map((hits) => hits.hits),
                // },

                backgroundColor: "rgb(255, 99, 132)",
              },
            ],
          },
          options: {
            scales: {
              x: {
                type: "linear",
                position: "bottom",
              },
            },
          },
        });
      });
    </script>
  </body>
</html>
